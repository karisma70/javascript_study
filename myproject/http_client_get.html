<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XMLHttpRequest 사용예제</title>
    <script type = "text/javascript" src = "httpRequest.js"></script>
</head>
<body>
<form name="nameFrame" accept-charset="utf-8">
    <input type="text" name="name">
    <input type="button" value="이름 입력(GET 방식)" onclick="requestMessage( 'GET', 'get_name_process.jsp')">
    <input type="button" value="이름 입력(POST 방식)" onclick="requestMessage( 'POST', 'get_name_process.jsp')">
</form>
<div id="message1"></div>
<br>
<br>
<form name="fileFrame" accept-charset="utf-8">
    <input type="text" name="name">
    <input type="button" value="파일명 입력" onclick="requestFile()">
</form>
<div id="message2"></div>

<script>

    function showRequestResult( http ){
        document.getElementById("message1").innerHTML = http.responseText;
    }

    function showFileContents( http ){
        document.getElementById("message2").innerHTML = http.responseAttachText + "</br>" + http.responseText;
    }

    function requestMessage( method, url ){
        document.getElementById("message1").innerHTML = "";
        param = nameFrame.name.value;
        url = url + "?name=" + encodeURIComponent(param);   // 어떤 시스템에서나 읽을 수 있는 ascii 문자로 변환한
        httpRequest( method, url, showRequestResult );
    }

    function requestFile(){
        document.getElementById("message2").innerHTML = "";
        fileName = fileFrame.name.value;
        httpRequest( "GET", fileName, showFileContents );
    }

</script>

</body>
</html>