/**
 * Created by Administrator on 2017-06-13.
 */


function getHistoryAdminStringObj( number ) {


    var strArray = [ { title: "약속의 땅 가나안",
        text: "이스라엘 백성은 애굽에서 430여년간의 긴 노예생활을 끝으로 하나님의 인도하심에 따라 모세가 이끄는 대로 애굽을 탈출하여 하나님께서 약속하신 약속의 땅 가나안으로 떠나게 된다<br> \
            이스라엘이 출애굽하여 11일 정도면 약속된 땅 가나안에 갈 수 있었지만, 40년의 광야생활을 통하여 \
            입성하게 되었다 <br> 모세는 눈앞에 가나안 땅을 두고 생을 다하게 되고, 여호수아가 이스라엘의 새 지도자가 되어 가나안 땅 \
            의 주변 원주민들과의 전쟁에서 승리하여 가나안 땅에 정착하게 된다" },
        { title: "출애굽 후 12지파",
            text: "출애굽 이후 이스라엘 백성이 가나안 정착을 위해 요단 강을 건너기 전, 모세가 임종이 다가왔을때 요단 동편의 땅을 12지파 중에서 르우벤, 갓, 므낫세 세 지파에게 기업으로 주었다<br>\
            이는 그들이 요단 강 동편에 이르기까지 이들이 앞서서 전쟁에서 승리할 수 있었기 때문이었다 <br>\
	    이 세 지파를 제외한 나머지 9지파에 대한 기업분배는 모세가 죽고 난 후, 여호수아가 요단 강을 건너 가나안 땅의 원주민들과 전쟁하여 5년 후에 이루어진다<br>\
	    인구와 병력이 가장 많았던 유다지파는 가장 넓은 영토를 분배받았고, 그 넓은 영토중에서 가운데 일부를  인원수가 가장 적은 시므온 지파에게 준다<br>\
	    지도에서 보는 바와 같이 유다지파의 땅이 시므온 지파의 땅을 포함하고 있음을 볼 수 있다 <br>\
	    다음으로 여호수아가 속한 에브라임 지파는 유다의 북쪽에 위치한 땅을 분배받고, 므낫세의 반지파가 요단강 기준 서쪽에 분배를 받고,  에브라임 지파가 중앙의 땅을 분배 받는다<br>\
	    이렇게 11지파가 땅을 분배받는 동안 레위 지파는 땅을 분배받지 못하고 48개의 성읍에 흩어져서 이스라엘 백성들에게 하나님의 말씀과 율법을 지키도록 사명을 감당하게 된다<br>" },

        /* http://www.subkorea.com/bible/study/bibles/history/history05.html */
        { title: "사사 시대(BC 12C)",
            text: "하나님의 은총으로 이스라엘 백성이 선민이 되어 가나안을 정복하고 그 곳에 정착하게 된 이스라엘은 하나님의 언약백성으로서 하나님의 말씀에 순종하는 삶을 살아야 했다 <br>\
            그러나 이스라엘 백성들은 타락하여 여호와 하나님을 버리고 우상을 숭배하며 동족끼리 분열하였으며, 따라서 남아있던 이방 족속들이 압제하게 되었다 <br>\
            그 결과 고통에 빠진 백성들은 하나님께 회개하며 여호와께 부르짖게 된다 <br>\
            하나님은 이를 지켜보시고 이들의 기도에 응답하여 때에 따라 사사를 세우셔서 구원해 주셨다 <br>\
            그러나 이스라엘 백성들은 평화가 지속되면 다시 타락하였으며, 타락과 심판 그리고 회개, 구원의 반복의 악순환이 지속되게 된다 <br>\
        사사시대에는 이처럼 이스라엘 백성이 하나님앞에 불성실하였지만 하나님은 끝까지 이스라엘 백성을 사랑하셨으며 신실하신 구속사를 이어가셨다<br>\
        성경말씀 - 사사기, 룻기, 삼상(1~3 장)" },

        /* http://www.subkorea.com/bible/study/bibles/history/history06.html  */
        { title: "사울왕 시대 이스라엘",
            text: "사사 시대 이후 이스라엘 백성은 혼란의 사사 시대를 끝으로 제사장인 사무엘에게 국가차원의 왕정 체제를 요구하였다 <br>\
            제사장 사무엘 자녀들의 여러가지 병폐가 원인이 있었지만 하나님께서는 이러한 왕정체제를 원치 않으셨다<br>\
            결국 이스라엘 백성의 바램으로 제사장 사무엘이 하나님의 명을 받아 기스의 아들 사울을 왕으로 삼고 기름부음을 하게 된다<br>\
        왕이된 사울은 암몬의 나하스가 쳐들어 왔을때 야베스를 포위하자 33만 대군을 이끌고 전쟁에서 승리하였으며, 게바에 있는 블레셋의 수비대까지 물리치게 된다<br>\
            아들 요나단 또한 베냐민 땅에 있는 블레셋을 무찔렀으며 21만의 병력으로 아말렉을 공격하여 이집트에서 몰아내어 사울은 이스라엘의 왕으로서 자리를 굳히게 된다<br>\
        그러나 사무엘이 사울에게 왕으로 기름을 부으면서 하나님의 명대로 행할것을 명하였으나 사울은 이를 어기고 결국 하나님과의 관계가 멀어져 회복할 수 없게 된다<br>\
            하나님은 이에 사울왕 대신에 다윗을 이스라엘의 새로운 왕으로 계획하셨고, 블레셋과의 전쟁 가운데 다윗이 골리앗을 물리치면서 다윗이 새로운 왕으로서 등극하게 되며 \
            후에 하나님의 뜻에따라 다윗이 이스라엘을 통치하게 된다 " } ,
        {  title : "다윗왕 시대 이스라엘",
            text : "사울왕이 집권할 당시 다윗은 베들레헴에 사는 이새의 막내아들로서 양치기일을 주로 하였다 <br>\
            그러나 하나님의 계획하심에 따라 다윗을 이스라엘의 새로운 왕으로 명하셨고 사무엘은 그 명에 따라 기름을 부어 왕으로 삼았다<br>\
        블레셋과의 전쟁에서 다윗은 사울왕의 신의를 입어 출정하여 골리앗을 죽이고 그 여세로 이스라엘 백성에게 높은 신임을 얻게 된다<br>\
            이를 불안하게 여긴 사울왕은 다윗을 죽이기 위해 찾아다녔고 다윗은 도피생활을 하였으며, 그 와중에 사울왕국은 분열되고 있었고\
        다윗은 그를 따르는 강력한 추종 세력과 함께 시글락을 얻게 된다<br>\
            그 후 사울은 블레셋과의 전쟁에서 목숨을 잃게 되었지만(삼상 31:4) 다윗은 블레셋을 정벌하고 아말렉을 진멸하였으며 헤브론에서 이스라엘의 왕으로 등극하게 된다 (삼하 5:3)<br>\
    그 이후 예루살렘성을 정복하였으며 다윗 궁을 건축하기에 이른다" },
        { title : "북이스라엘과 남유다",
            text : "다윗에 이어 솔로몬이 왕이 된 후 이스라엘 통일 왕국은 건재하였으나 하나님 앞에 죄를 지은 솔로몬의 죄악과 함께 솔로몬의 아들 르호보암의 통치력 부재로 결국 남과 북으로 분열되고 만다<br>\
            솔로몬은 느밧의 아들 여로보암의 용맹함과 부지런함을 보고 요셉 집의 강제 노역의 감독자로 임명하였는데 선지자 아히야가 그를 만나 이스라엘이 남과 북으로\
            갈라진다는 예언을 하였으며 이를 알게된 솔로몬이 여로보암을 죽이려 하였다<br>\
        이에 여로보암은 목숨을 구하기 위하여 애굽으로 도망하였다가 솔로몬이 죽고나서 다시 이스라엘로 돌아오게 된다<br>\
        돌아온 여로보암은 10지파의 지지를 받아 르호보암의 통치에 불만을 품은 이스라엘의 백성들과 함께 북 이스라엘을 세우고, 르호보암은 이스라엘의 남쪽 유다를 통치하게 된다<br>\
            남과 북으로 갈라진 이스라엘은 사사기때와 마찬가지로 하나님과의 관계가 멀어지고 암흑기를 맞게 된다"
            },
        { title : "현재의 국가",
            text : "전세계의 현재 국가는 지도상에서 237개국에 이르며, UN 회원국의 수는 193개국이다 <br>" +
            "이 가운데 하나님의 역사를 간직한 이스라엘과 관련한 국가는 이스라엘, 팔레스타인, 레바논, 시리아, 요르단, 이집트가 있으며 아브라함의 이동경로와 메소보다미아, 니느웨를 포함한 이라크가 있다" }
        ];

    return strArray[ number ];
}


function examinRightWordinText( strWord, strText ){
    var strPos = strText.indexOf(strWord);
    if( strPos == -1 ){
        return false;
    }

    if( strPos == 0 )
        return true;

    if( strText.substring(strPos-1, strPos) != " " ){
        return false;
    }
    return true;
}

function IsFindLocationWord( contentText, locationWord ){

    if( locationWord == "시므온"){
        ConsoleLog( ".....");
    }

    var addStr = [ " ", "와 ", "과 ", "으로 ", "이라 ", "에 ", "에서 " , "부터 ", "까지 ", "를 ", "을 ", "이 ", "로 ", "의 "  ];

    for( var idx in addStr ){
        var pos = contentText.indexOf( locationWord + addStr[idx] );
        if( pos  > -1 ) {
            return true;
        }
    }

    return false;
}


// 검색어이긴 하지만 지도 데이터에 없을때 보라색
//  검색어이긴 하지만 지도 데이터에 있을때 군청색
//  텍스트 내에 지도 데이터가 있을 때 초록색
// #9C1AC8  - 보라색,  #0D63DB - 군청색 , #238106 초록색
function makeStrongWordInText( LayerManager, strWord, bibleTitle, bibleText, color , bIsPlaceName ) {
    var strongStart = "<strong><font color='" + color + "'>";
    var strongEnd = "</font></strong>";

    var strPos = bibleText.indexOf(strWord);
    if (strPos == -1) {
        return bibleText;
    }

    if (strPos > 0 && bibleText.substring(strPos - 1, strPos) != " ") {
          if( bibleText.substring(strPos-1, strPos) != "'" )
                return bibleText;
    }
    if( strPos > 0 &&  ( bibleText.substring(strPos-1, strPos) == ">" || bibleText.substring( strPos + strWord.length, strPos + strWord.length + 1 ) == "<") ) {       // 이미 발견된 단어이므로 스킵
        return bibleText;
    }

    var firstFoundedPos = bibleText.indexOf("\')");       // 이미 검색된 결과가 있으면 그냥 리턴
    if( firstFoundedPos == (strPos +strWord.length) ) {
        var tempStrText = bibleText.substring( firstFoundedPos + 4, bibleText.length);

        strPos = tempStrText.indexOf(strWord );
        var secondFoundedPos = tempStrText.indexOf("</a>");
        if( secondFoundedPos == (strPos +strWord.length)){
            return bibleText;
        }
    }

    var strStrong = bibleText.substring(0, strPos);

    var poiObj = LayerManager.findPoiObjByBibleTitleAndWord( bibleTitle, strWord );
    if( poiObj ) {
            var posStart = '<a href=' + '"javascript:moveToPlaceByPoiID( ' + poiObj.id + ')\" style=\"text-decoration:none; font-weight:bold; color:' + color + '\" >';
            var posEnd = '</a>';
            strStrong += posStart;
    }
    else{
        if( bIsPlaceName == false)
            strStrong += strongStart;
    }

    strStrong += strWord;
    if( poiObj )
        strStrong += posEnd;
    else {
        if( bIsPlaceName == false )
            strStrong += strongEnd;
    }
    strStrong += makeStrongWordInText(  LayerManager, strWord, bibleTitle, bibleText.substring( strPos + strWord.length, bibleText.length ), color );

    return strStrong;
}


function makeStrongInText( LayerManager, searchWord, recvObj ) {
    var layerContainer = LayerManager.getLayerContainer();

    if( typeof recvObj === "undefined"){
        return "";
    }

    if( typeof recvObj.content === "undefined"){
        return "";
    }

    var bibleTitle = recvObj.title;     // 성경의 책권을 의미
    var bibleText = recvObj.content;
    var boolFind = false;

    for( var order in layerContainer.poiWords ) {
        var color = "";
        var placeName = layerContainer.poiWords[order].text;
        if( placeName == searchWord ) {
            boolFind = true;
            color = "#B404AE";  // 핑크색 , //  텍스트 내에 검색어와 지명이 일치할때
        }else{
            color = "#0D63DB";  // 군청색, //  텍스트 내에 지명이 있을때 군청색
        }

        bibleText = makeStrongWordInText( LayerManager, placeName, bibleTitle, bibleText, color, true );
    }


    if( boolFind == false){
        bibleText = makeStrongWordInText( LayerManager, searchWord, bibleTitle, bibleText, "#DF0101", false );  // 보라색, 검색어이긴 하지만 지도 데이터에 없을때 빨간색
    }

    return bibleText;
}


function requestPoiInfo( poiObj, recvFunc,  noRecvFunc){
    var searchParam = {
        type: "Poi",     // book, chapter, paragraph 등으로 구성된 검색
        option: {}
    };

    // searchParam.option["name"] = poiName;
    searchParam.option["name"] = poiObj.biblePlace;
    if( poiObj.title != "" ){
        searchParam.option["title"] = poiObj.title;
    }

    var jsonStr = JSON.stringify( searchParam );

    httpRequest("POST", jsonStr, function( http ) {
        var resObj = JSON.parse( http.responseText );

        if( resObj.result != "undefined" && resObj.result == "fail" ){
            ConsoleLog("requestPoiInfo() Fail!!!   param: " + jsonStr );
            if( noRecvFunc ){
                noRecvFunc( resObj );
            }
            return;
        }

        if (resObj.length != "undefined") {    // 배열로 받아올 경우
            if( resObj.length < 1){
                noRecvFunc( resObj );
                return;
            }
            for( idx in resObj ){
                var poiObj = resObj[idx];
                recvFunc( poiObj );
                break;                  // 여러개 받아오더라도 하나만 처리하도록 한다.
            }
        }
        else{
            recvFunc( resObj );
        }

    });
}


/*
function requestPoiContentAndShow( poiObj, popup, overlay ) {

    var youtube = "";
    var poiText = poiObj.biblePlace;
    if( poiObj.title != "")
        // poiText += "<br><iframe width=\"320\" height=\"200\" frameborder=\"0\" >" + poiObj.title + "</iframe>";
        poiText += "("+ poiObj.title + ")";

        requestPoiInfo( poiObj.biblePlace, function ( recvPoiObj) {
        if ( recvPoiObj.hasOwnProperty("youtube")) {
            youtube = recvPoiObj["youtube"];
        }

        if (youtube != "") {
            popup.innerHTML = poiText + "<br><iframe width=\"320\" height=\"240\" src=\"" + youtube + "\" frameborder = \"0\" allowfullscreen></iframe>";
        } else
            popup.innerHTML = poiText;
        overlay.setPosition( [poiObj.x, poiObj.y] );
    }, function () {
        popup.innerHTML = poiText;
        overlay.setPosition( [poiObj.x, poiObj.y] );
    });
}
*/



function showYoutubeOfPoi( poiObj, overlayObj, popupObj, recvPoiObj ){

    var poiText = poiObj.biblePlace;
    var youtube = "";

    if ( recvPoiObj.hasOwnProperty("youtube")) {
        youtube = recvPoiObj["youtube"];
    }
}


function layerPopup(el){

    $('#contentDiv').scrollTop(0);

    var $el = $(el);		//레이어의 id를 $el 변수에 저장
    var isDim = $el.prev().hasClass('dimBg');	//dimmed 레이어를 감지하기 위한 boolean 변수

    isDim ? $('.dim-layer').fadeIn() : $el.fadeIn();

    var $elWidth = ~~($el.outerWidth()),
        $elHeight = ~~($el.outerHeight()),
        docWidth = $(document).width(),
        docHeight = $(document).height();

    // 화면의 중앙에 레이어를 띄운다.
    if ($elHeight < docHeight || $elWidth < docWidth) {
        $el.css({
            marginTop: -$elHeight /2,
            //top : 20,
            marginLeft: -$elWidth/2
        })
    } else {
        $el.css({top: 0, left: 0});
    }

    $el.find('a.btn-layerClose').click(function(){
        isDim ? $('.dim-layer').fadeOut() : $el.fadeOut(); // 닫기 버튼을 클릭하면 레이어가 닫힌다.
        return false;
    });

    $('.layer .dimBg').click(function(){
        $('.dim-layer').fadeOut();
        return false;
    });

    $('#contentDiv').scrollTop(0);

}



function requestPoiContentAndShow( poiObj, popup, overlay ) {
    var youtube = "";
    var focusPoiObj = poiObj;
    var infoText = "";
    var poiText = poiObj.biblePlace;

    var youtubeRef = "<a href =\"javascript:showYoutubePoi()\"' >";
    var youtubeIcon = "<img src=\"biblemap/image/camera-icon.png\" style=\"width:20px; height:20px; vertical-align:middle;\">";

    var textRef = "<a href =\"javascript:showTextPoi()\"' >";
    var textIcon = "<img src=\"biblemap/image/text-icon.png?version=20170904\" style=\"width:20px; height:20px; vertical-align:middle;\">";

    var lineImage = '<div style=\"height: 14px; background: url(biblemap/image/horizon-line.png);\"></div>';

    /*
    if( poiObj.title != "")o
          poiText += "("+ poiObj.title + ")";
          */

    // requestPoiInfo( poiObj.biblePlace, function ( recvPoiObj) {
    requestPoiInfo( poiObj, function ( recvPoiObj) {
        if ( recvPoiObj.hasOwnProperty("youtube")) {
            youtube = recvPoiObj["youtube"];
        }

        if ( recvPoiObj.hasOwnProperty("text")) {
            infoText = recvPoiObj["text"];
        }

        showBaseInfoPoi();

    }, function () {
        popup.innerHTML = poiText + " ";
        showTitlePoi( popup, poiObj.title );
        overlay.setPosition( [poiObj.x, poiObj.y] );
    });

    showTitlePoi = function( popup, title ) {
        if( title == "") {
            return;
        }
        var strLen = ( title.length * 12) + 35;
        popup.innerHTML += lineImage;
        popup.innerHTML += '<iframe id=\"contentFrame\" width=\"'+ strLen + '\" height=\"35\" frameborder = \"0\" sandbox=\"allow-scripts allow-same-origin\" src=\"about:blank\"></iframe>';

        var frame = document.getElementById("contentFrame");
        if( frame ) {
            var fdoc = frame.contentDocument;
            var contentString = "<span style=\'font-size:10pt;\'>" + title + "</span>";
            fdoc.write( contentString );
        }

    };


    showBaseInfoPoi = function(){
        if (youtube != "") {
            popup.innerHTML = poiText +" " + youtubeRef + youtubeIcon + "</a>";
        } else
            popup.innerHTML = poiText;

        if(infoText != "" ){
            popup.innerHTML += "" + textRef + " " + textIcon + "</a>";
        }

        showTitlePoi( popup, poiObj.title );

        overlay.setPosition( [poiObj.x, poiObj.y] );
    };

    showYoutubePoi = function() {
        var scriptRef = "<a href =\"javascript:showBaseInfoPoi()\"' >";
        var foldIcon = "<img src=\"biblemap/image/fold-icon.png\" style=\"width:20px; height:20px; vertical-align:middle;\">";
        popup.innerHTML = poiText + " " + scriptRef + foldIcon + "</a>";
        if( infoText!= "" ){
            popup.innerHTML += textRef + textIcon + "</a>";
        }
        popup.innerHTML += lineImage;
        if( poiObj.title != ""){
            popup.innerHTML += "<br>" + poiObj.title + "<br>";
        }

        popup.innerHTML += "<iframe width=\"320\" height=\"240\" src=\"" + youtube + "\" frameborder = \"0\" allowfullscreen></iframe>";
        overlay.setPosition( [poiObj.x, poiObj.y] );
    };


    /*
    showTextPoi = function(){
        var scriptRef = "<a href =\"javascript:showBaseInfoPoi()\"' >";
        var foldIcon = "<img src=\"biblemap/image/fold-icon.png\" style=\"width:20px; height:20px; vertical-align:middle;\">";
        popup.innerHTML = poiText + " " + scriptRef + foldIcon + "</a>";
        if( youtube!= "" ){
            popup.innerHTML += youtubeRef + youtubeIcon + "</a>";
        }

        popup.innerHTML += lineImage;
        if( poiObj.title != ""){
            popup.innerHTML += "<br>" + poiObj.title + "<br>";
        }

        popup.innerHTML += '<iframe id=\"contentFrame\" oncontextmenu=\"return false;\" ondragstart=\"return false;\" onselectstart=\"return false;\" width=\"320\" height=\"240\" frameborder = \"0\" sandbox=\"allow-scripts allow-same-origin\" src=\"about:blank\"></iframe>';

             var frame = document.getElementById("contentFrame");
        if( frame ) {
            var fdoc = frame.contentDocument;
            var contentString = "<span  oncontextmenu=\"return false;\" ondragstart=\"return false;\" onselectstart=\"return false;\" style=\'font-size:10pt;\'>" + infoText + "</span>";
            fdoc.write( contentString );
        }

        overlay.setPosition( [poiObj.x, poiObj.y] );
    };
    */

    showTextPoi = function() {      // tabMenu 에서 정보 보여주기

        var infoTab = document.getElementById( 'tab3' );
        infoTab.innerHTML = '<a href=' + '"javascript:moveToPlaceByPoiID( ' + focusPoiObj.id + ')\" style=\"text-decoration:none; font-weight:bold; color: #9C1AC8 \" >' + "[ " + poiText + " ]  " +  '</a>';

        var infoObj = { // title : poiText,
                        content : infoText
        };

        var strConvText = makeStrongInText( layerManager, focusPoiObj.biblePlace, infoObj );

        // infoTab.innerHTML += infoText;
        infoTab.innerHTML += strConvText;

        adjustScrDiv.setIsFullScr("false");

        $("#tab3").scrollTop(0);
        tabMenu.selectTab('tab3Menu');

    };
}


function showTextLayerPopup( title, infoText ){

    var lineImage = '<div style=\"height: 14px; background: url(biblemap/image/horizon-line.png);\"></div>';

    var popupTitle = document.getElementById( 'poiTitle' );
    popupTitle.innerHTML = "";
    popupTitle.innerHTML += title;
    popupTitle.innerHTML += lineImage;

    var popupContent = document.getElementById( 'poiTextContent' );
    popupContent.innerHTML = "";
    // popupContent.innerHTML += poiText;
    // popupContent.innerHTML += lineImage + "<br>";
    popupContent.innerHTML += '<br>' + infoText;

    layerPopup( '#customPopup' );

}





function Tooltip( paramMap, cssClassName ) {
    var bibleMap = paramMap;

    var tooltipElement = null;
    this.tooltipArray = [];

    var zOrder = 0;

    this.create = function( poiName, linkedText, coord){

        tooltipElement = document.createElement('div');

        // tooltipElement.className = 'tooltip tooltip-static';
        tooltipElement.className = cssClassName;

        tooltip = new ol.Overlay({
            element: tooltipElement,
            offset: [0, -15],
            positioning: 'bottom-center'
        });
        bibleMap.addOverlay(tooltip);

        tooltipElement.innerHTML = linkedText;


        tooltipElement.setAttribute("id", poiName );
        var strID = "#"+ poiName ;

        $(strID).css( "z-index", zOrder.toString() );

        tooltip.setPosition(coord);
        tooltip.setOffset([0, -7]);

        this.tooltipArray.push( tooltip);
        zOrder +=1;
    };

    this.allRemove = function() {

        zOrder = 0;

        if ( tooltipElement) {
            tooltipElement.parentNode.removeChild( tooltipElement );
            tooltipElement = null;
        }

        for (var idx in this.tooltipArray) {
            var tooltip = this.tooltipArray[idx];
            bibleMap.removeOverlay(tooltip);
        }
    };
}

var BibleChapterList = function() {

    var chapterArray = [];

    setChapterArray = function(  objList ){
        // chapterArray = [];

        for (var idx in objList ) {
            var chapter = objList[idx];
            chapterArray.push( chapter );
        }
    };

    this.getCount = function(){
        return chapterArray.length;
    };

    this.getChapterByNumber = function( number ){
        for( var idx in  chapterArray ){
            var chapter = chapterArray[ idx ];
            if( chapter.bookNumber == number ){
                return chapter;
            }
        }
        return null;
    };

    this.getBookNumberByName = function( chapterName ){
        for( var idx in chapterArray ){
            var chapter = chapterArray[idx];
            if( chapter.title == chapterName ){
                return chapter.bookNumber;
            }
        }
        return -1;

    };

    this.requestBibleChapter = function( callback ){
        var searchParam = {
            type: "ChapterList",
            option: {}
        };

        var jsonStr = JSON.stringify( searchParam );
        // ConsoleLog( "send param : " + jsonStr );

        httpRequest("POST", jsonStr, function( http ) {
            var resObj = JSON.parse(http.responseText);

            if( resObj.result != "undefined" && resObj.result == "fail" ){
                ConsoleLog( "request ChapterList!!! " + resObj.error );
            }
            else {
                if (resObj.length != "undefined") {    // 배열로 받아올 경우
                    setChapterArray( resObj );
                }else{
                    ConsoleLog( "Bible ChapterList Receive Error!!");
                }
            }

            callback();

        }) ;

    };

};